<!doctype html>
<html>

<head>
  <title>Link</title>
  <link rel="icon" href="assets/graphics/link_icon_w_on_g.png">
  <link rel="stylesheet" type="text/css" href="assets/css/dashboard.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
  <script src="https://cdn.plaid.com/link/v2/stable/link-initialize.js"></script>
  <script src="assets/js/dashboard.js"></script>
  <script src="assets/js/inactivity_timer.js"></script>
</head>

<script>
  getUserDataFromCache();

  $(document).ready(inactivity_timer());
</script>

<body>
  <div class="top-bar">
    <div class="logo">
      <a href="/"><img src="assets/graphics/link_brand_white.png" width="120px" style="float: left; "></a>
    </div class>
    <div class="nav-bar">
      <a href="/dashboard">Dashboard</a>
      <!-- <a href="/workinprogress">Business</a>
      <a href="/workinprogress">About</a>-->
      <a href="/api/logout" id="logout">Logout</a>
      <a id="pro-button" href="/workinprogress">Link Pro</a>
    </div>
  </div>
  </div>
  <div class="white-body">
    <button id="link-btn"><img src="assets/graphics/add.svg"></button>
    <div class="content" id="container_block">

      <!-- accounts cards get inserted here in the javascript -->
    </div>
  </div>

  <script>
    var handler = Plaid.create({
      apiVersion: 'v2',
      clientName: 'Plaid Walkthrough Demo',
      env: '<%= PLAID_ENV %>',
      product: ['transactions'],
      key: '<%= PLAID_PUBLIC_KEY %>',
      onSuccess: function(public_token) {
        $.post('/get_access_token', {
          public_token: public_token
        }, function() {
          $('#container').fadeOut('fast', function() {
            $('#intro').hide();
            $('#app, #steps').fadeIn('slow');
          });
          $.get("/api/refresh_cache").success(
              function(success){
                  getUserDataFromCache()
              });
        });
      },
    });

    $('#link-btn').on('click', function(e) {
      handler.open();
    });

    handler.onExit
  </script>

  <div id="more-info-modal" class="modal">
      <div class="modal-content">
          <div class="form">
              <form id="sign-up-form" action="/signup" method="post" class="form">
                  <input id="sign-up-name" type="text" placeholder="Username" name="username" required/>
                  <input id="sign-up-email" type="email" placeholder="Email" name="email" required/>
                  <input id="sign-up-pass" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters" type="password" placeholder="Password" name="password" required>
                  <img id="hide-icon" src="assets/graphics/hide.svg" width="20px" onClick="showPass()">
                  <button id="create-button">Create</button>
                  <p class="message">Already registered? <a id="already-login">Login</a></p>
              </form>
          </div>
      </div>
  </div>


</body>


</html>
